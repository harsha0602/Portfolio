/*
  Minimal, modern, accessible defaults.
  - System fonts for performance
  - CSS variables for light/dark theme
  - Focus styles and reduced motion support
  - Card layout and badges consistent with existing brand colors
*/

:root {
  --color-primary: #61e7be; /* from style/base/_variables.scss */
  --color-accent: #5B8CFF;
  --color-success: #22C55E;
  --color-warning: #F59E0B;
  --color-bg: #ffffff;
  --color-text: #272341; /* dark-blue-text */
  --color-muted: #555;
  --color-card: #f7f7f9;
  --color-border: #e4e4ea;
  --shadow: 0 4px 14px rgba(0, 0, 0, 0.08);
}

html[data-theme='dark'] {
  --color-bg: #0f1115;
  --color-text: #e6eaf2;
  --color-muted: #c9c9cf;
  --color-card: #171923;
  --color-border: #2a2f3a;
  --shadow: 0 4px 14px rgba(0, 0, 0, 0.5);
}

* { box-sizing: border-box; }
html, body, #root { height: 100%; }
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen,
    Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, Arial, sans-serif;
  color: var(--color-text);
  /* Slightly darker blue gradient for better depth; solid in dark mode */
  background: linear-gradient(160deg, #dde9ff 0%, #f2f7ff 40%);
  line-height: 1.6;
}
html[data-theme='dark'] body { background: var(--color-bg); }

.skip-link {
  position: absolute; left: -999px; top: -999px;
}
.skip-link:focus { left: 1rem; top: 1rem; background: var(--color-primary); color: #000; padding: .5rem 1rem; border-radius: .5rem; }

.site-header {
  position: sticky; top: 0; z-index: 10; backdrop-filter: blur(6px);
  background: color-mix(in oklab, var(--color-bg) 85%, transparent);
  border-bottom: 1px solid var(--color-border);
}
.site-nav {
  display: flex; align-items: center; gap: 1rem; padding: .75rem 1rem; max-width: 1100px; margin: 0 auto; position: relative;
}
.brand { color: var(--color-text); font-weight: 700; text-decoration: none; }
.nav-list { list-style: none; display: none; gap: .75rem; padding: 0; margin: 0; }
@media (min-width: 720px) { .nav-list { display: flex; } }
.nav-list a { color: var(--color-muted); text-decoration: none; padding: .25rem .5rem; border-radius: .375rem; }
.nav-list a:hover, .nav-list a:focus { outline: 2px solid var(--color-border); outline-offset: 2px; color: var(--color-text); }
.spacer { flex: 1; }
.theme-toggle { background: transparent; border: 1px solid var(--color-border); color: var(--color-text); border-radius: .5rem; padding: .4rem .6rem; cursor: pointer; }
.theme-toggle:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }

/* Mobile quick icons */
.nav-icons { list-style: none; display: flex; gap: .5rem; padding: 0; margin: 0 .5rem 0 0; }
.nav-icon { display: inline-flex; align-items: center; justify-content: center; width: 36px; height: 36px; border-radius: .5rem; color: var(--color-muted); text-decoration: none; border: 1px solid var(--color-border); background: transparent; }
.nav-icon:hover, .nav-icon:focus-visible { color: var(--color-text); outline: 2px solid var(--color-border); outline-offset: 2px; }
@media (min-width: 720px) { .nav-icons { display: none; } }
/* Hide icon row on very small screens in favor of dropdown */
@media (max-width: 600px) { .nav-icons { display: none; } }

/* Single dropdown menu for very small screens */
.mobile-menu { display: none; }
.menu-button { background: transparent; border: 1px solid var(--color-border); color: var(--color-text); border-radius: .5rem; padding: .4rem .6rem; cursor: pointer; }
.menu-button:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }
.menu-dropdown { position: absolute; right: 1rem; top: calc(100% + .5rem); background: var(--color-card); border: 1px solid var(--color-border); border-radius: .6rem; box-shadow: var(--shadow); padding: .25rem; display: flex; flex-direction: column; gap: .1rem; z-index: 20; min-width: 160px; max-width: 70vw; list-style: none; margin: 0; }
.menu-dropdown li { list-style: none; }
.menu-dropdown a { color: var(--color-text); text-decoration: none; padding: .45rem .6rem; border-radius: .4rem; display: block; font-size: .95rem; white-space: nowrap; }
.menu-dropdown a:hover, .menu-dropdown a:focus { background: color-mix(in oklab, var(--color-bg) 85%, transparent); outline: 2px solid var(--color-border); outline-offset: 1px; }
@media (max-width: 600px) { .mobile-menu { display: inline-flex; } }

.section { padding: 3rem 1rem; }
.container { max-width: 1100px; margin: 0 auto; }
.section-title { font-size: clamp(1.6rem, 2vw + 1rem, 2.2rem); margin: 0 0 0.5rem; color: var(--color-accent); }
.section-intro { margin: 0 0 1rem; color: var(--color-muted); }

.hero-title { font-size: clamp(2rem, 3.6vw + 1rem, 2.6rem); margin: 0; }
.name-highlight { color: var(--color-accent); text-decoration: none; }
.hero-subtitle { color: var(--color-muted); margin: .25rem 0 .5rem; }
.hero-meta { color: var(--color-muted); margin: 0 0 1rem; }
.hero-cta { display: flex; flex-wrap: wrap; gap: .5rem; }

/* Hero panel gradient to add depth */
.hero { background: linear-gradient(135deg, rgba(91,140,255,0.12), rgba(97,231,190,0.10)); border-radius: 1rem; }

/* About layout with profile photo */
.about-layout { display: grid; grid-template-columns: 1fr; gap: 1rem; align-items: start; margin-top: 1rem; }
@media (min-width: 900px) { .about-layout { grid-template-columns: 340px 1fr; } }
.about-media { display: flex; justify-content: center; }
/* On large screens, top-align the photo with the About text and left-align within its column */
@media (min-width: 900px) {
  .about-media { margin-top: 3em; }
}
.about-photo { width: 100%; max-width: 320px; aspect-ratio: 1 / 1; object-fit: cover; border-radius: .8rem; border: 1px solid var(--color-border); box-shadow: var(--shadow); }

.btn { background: var(--color-primary); color: #132; border: none; border-radius: .6rem; padding: .6rem .9rem; text-decoration: none; font-weight: 600; box-shadow: var(--shadow); }
.btn:hover, .btn:focus { filter: brightness(0.95); outline: 2px solid #0b0; outline-offset: 2px; }
.btn-secondary { background: var(--color-card); color: var(--color-text); }
.btn-tertiary { background: transparent; border: 1px solid var(--color-border); color: var(--color-text); }

.grid { display: grid; gap: 1rem; grid-template-columns: 1fr; }
@media (min-width: 720px) { .grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }

.card { background: var(--color-card); border: 1px solid var(--color-border); border-radius: .9rem; padding: 1rem; box-shadow: var(--shadow); }
.card-header { margin-bottom: .5rem; }
.card-title { margin: 0 0 .25rem; font-size: 1.12rem; }
.card-subtitle { margin: 0 0 .25rem; color: var(--color-muted); }
.card-location { opacity: 0.95; }
.card-meta { margin: 0 0 .5rem; color: var(--color-muted); font-size: .95rem; }
.card-actions { display: flex; gap: .5rem; margin-top: .5rem; }
.company-logo { width: 20px; height: 20px; object-fit: contain; display: inline-block; }
.summary-par { margin: 0 0 .6rem; }
.tech-line { opacity: 0.9; }
.stat-badges { display: flex; flex-wrap: wrap; gap: .4rem; margin-top: .25rem; }
.stat-badge { background: #eef2ff; color: #243b6b; border: 1px solid #c7d2fe; border-radius: 999px; padding: .15rem .6rem; font-size: .8rem; }
.company-link { display: inline-flex; align-items: center; gap: .3rem; margin-top: .5rem; color: var(--color-accent); font-size: .9rem; text-decoration: none; transition: opacity .2s; }
.company-link:hover { opacity: .75; text-decoration: underline; }
.company-link-btn { position: absolute; bottom: .75rem; right: .75rem; display: inline-flex; align-items: center; justify-content: center; width: 32px; height: 32px; background: var(--color-accent); color: #fff; border-radius: 50%; text-decoration: none; box-shadow: 0 2px 8px rgba(0,0,0,0.15); transition: transform .2s, box-shadow .2s; z-index: 5; }
.company-link-btn:hover { transform: scale(1.1); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
.experience-front { position: relative; }

/* Flippable card */
.flip-card { perspective: 1200px; position: relative; padding: 0; cursor: pointer; min-height: var(--flip-h, 260px); transition: transform 0.3s ease, box-shadow 0.3s ease; }
.flip-card .flip-inner { position: relative; width: 100%; height: 100%; transition: transform var(--flip-speed, 500ms) ease; transform-style: preserve-3d; will-change: transform; }
.flip-card[data-flipped="true"] .flip-inner { transform: rotateY(180deg); z-index: 2; }
.flip-card[data-flipped="true"] { min-height: var(--flip-h-flipped, calc(var(--flip-h, 260px) + 120px)); box-shadow: 0 10px 24px rgba(0,0,0,0.12); }
/* Pop-out effect when card is in view or hovered */
.flip-card[data-in-view="true"], .flip-card:hover { transform: scale(1.02); box-shadow: 0 8px 20px rgba(0,0,0,0.15); z-index: 1; }
.flip-face { position: relative; backface-visibility: hidden; -webkit-backface-visibility: hidden; border-radius: .9rem; overflow: hidden; transform: translateZ(0); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
.flip-front, .flip-back { position: absolute; inset: 0; padding: 1rem; display: flex; flex-direction: column; }
.flip-front { overflow: hidden; }
.flip-back { overflow: auto; background: var(--color-card); }
.flip-back { transform: rotateY(180deg) translateZ(0); }
.flip-card:focus-visible { outline: 2px solid var(--color-accent); outline-offset: 2px; }

/* Project cover overlay */
.project-cover { position: relative; border-radius: .9rem; overflow: hidden; border: 1px solid var(--color-border); aspect-ratio: 16 / 9; }
.project-cover img { display: block; width: 100%; height: 100%; object-fit: cover; }
.project-overlay { position: absolute; inset: 0; background: linear-gradient(180deg, rgba(0,0,0,0) 40%, rgba(0,0,0,0.55) 100%); display: flex; flex-direction: column; justify-content: flex-end; gap: .5rem; padding: .75rem; }
.project-title-on-image { margin: 0; color: #fff; text-shadow: 0 2px 8px rgba(0,0,0,0.6); }
.project-front .badges .badge { background: rgba(255,255,255,0.92); color: #132; border-color: rgba(0,0,0,0.08); }

.badges { display: flex; flex-wrap: wrap; gap: .4rem; }
.badge { background: #fff; color: #333; border: 1px solid var(--color-accent); border-radius: 999px; padding: .2rem .6rem; font-size: .85rem; }
html[data-theme='dark'] .badge { background: #0f1115; color: #eaeaea; }

.highlights { margin: .5rem 0 0; padding-left: 1.1rem; }
.highlights li { margin: .3rem 0; }
.highlight-row { display: flex; align-items: baseline; gap: .75rem; }
.highlight-text { flex: 1 1 auto; margin: 0; }
.chips { display: flex; flex-wrap: wrap; gap: .3rem; margin-left: auto; }
@media (max-width: 600px) {
  .highlight-row { flex-direction: column; align-items: flex-start; }
  .chips { margin-left: 0; }
}
.chip { background: color-mix(in oklab, var(--color-primary) 75%, #fff); color: #042; border: none; border-radius: 999px; padding: .15rem .5rem; font-size: .75rem; }
.chip--impact { background: var(--color-success); color: #052; }
.chip--date { background: var(--color-warning); color: #3a2400; }

.skills-grid { display: grid; gap: 1rem; grid-template-columns: 1fr; }
@media (min-width: 720px) { .skills-grid { grid-template-columns: repeat(3, minmax(0,1fr)); } }
.skills-card { background: var(--color-card); border: 1px solid var(--color-border); border-radius: .9rem; padding: 1rem; box-shadow: var(--shadow); }
.skills-title { margin: 0 0 .5rem; }

.site-footer { padding: 2rem 1rem; border-top: 1px solid var(--color-border); text-align: center; color: var(--color-muted); }
.contact-title { margin: 0 0 .75rem; color: var(--color-text); font-size: 1.1rem; }
.contact-links { list-style: none; padding: 0; margin: 0 auto 1rem; display: flex; flex-wrap: wrap; justify-content: center; gap: .5rem; }
.contact-link { display: inline-flex; align-items: center; gap: .4rem; padding: .4rem .6rem; border: 1px solid var(--color-border); border-radius: .5rem; color: var(--color-text); text-decoration: none; background: color-mix(in oklab, var(--color-bg) 85%, transparent); }
.contact-link:hover, .contact-link:focus-visible { outline: 2px solid var(--color-border); outline-offset: 2px; }
.footer-note { margin-top: 1rem; opacity: 0.85; }

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* Slow down flip on coarse pointers (mobile/tablet) */
@media (pointer: coarse), (max-width: 720px) {
  .flip-card .flip-inner { transition-duration: 1000ms; }
}

img { max-width: 100%; height: auto; }

/* Project media area to maintain consistent card height even without images */
.project-media { margin-top: .5rem; }
.project-media img { width: 100%; height: auto; border-radius: .5rem; border: 1px solid var(--color-border); }
.image-placeholder { width: 100%; height: 200px; background: var(--color-card); border: 1px solid var(--color-border); border-radius: .5rem; }

/* Card specific heights */
.flip-card--project { --flip-h: 360px; --flip-h-flipped: 440px; }
.flip-card--experience { --flip-h: 420px; --flip-h-flipped: 520px; }

/* Experience cover overlay */
.experience-cover { position: relative; border-radius: .9rem; overflow: hidden; border: 1px solid var(--color-border); aspect-ratio: 16 / 9; }
.experience-cover img { display: block; width: 100%; height: 100%; object-fit: cover; }
.experience-overlay { position: absolute; inset: 0; background: linear-gradient(180deg, rgba(0,0,0,0.15) 30%, rgba(0,0,0,0.65) 100%); display: flex; flex-direction: column; justify-content: flex-end; gap: .4rem; padding: .75rem; }
.experience-title-on-image { margin: 0; color: #fff; text-shadow: 0 2px 8px rgba(0,0,0,0.6); }
.experience-front .badges .badge { background: rgba(255,255,255,0.92); color: #132; border-color: rgba(0,0,0,0.08); }

/* Compact mobile tiles for better viewport usage */
@media (max-width: 600px) {
  .grid { gap: .75rem; }
  .flip-card.card { padding: .6rem; border-radius: .75rem; }
  .flip-front, .flip-back { padding: .6rem; }
  .flip-card--project { --flip-h: 320px; --flip-h-flipped: 390px; }
  .flip-card--experience { --flip-h: 380px; --flip-h-flipped: 460px; }
  .experience-cover, .project-cover { aspect-ratio: 16 / 10; }
  .badge { font-size: .75rem; padding: .1rem .4rem; }
  .experience-title-on-image, .project-title-on-image { font-size: clamp(0.95rem, 4vw, 1.1rem); }
  .card-subtitle { font-size: .9rem; }
  .card-meta { font-size: .8rem; }
}
